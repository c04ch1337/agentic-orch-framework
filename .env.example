# ==============================================================
# PHOENIX ORCH AGI System Environment Configuration
# ==============================================================
#
# IMPORTANT SECURITY NOTICE: 
# This file contains PLACEHOLDERS for sensitive information.
# NEVER commit actual credentials or API keys to version control.
# Use HashiCorp Vault or another secrets management system to store 
# sensitive values in production environments.
#
# See the documentation in /docs/secret-management.md for details.
# ==============================================================

# ------------------------------------------------------------
# External API Keys
# ------------------------------------------------------------
# OpenAI API key used for LLM capabilities
# Required for the LLM service to function
OPENAI_API_KEY=your_openai_api_key_here

# SerpAPI key used for search capabilities
# Required for web search functionality
SERPAPI_KEY=your_serpapi_key_here

# ------------------------------------------------------------
# Secrets Management Configuration
# ------------------------------------------------------------
# Vault server address
VAULT_ADDR=http://localhost:8200
# Vault role ID for AppRole authentication (DO NOT USE ROOT TOKENS IN PRODUCTION)
VAULT_ROLE_ID=REPLACE_WITH_YOUR_ROLE_ID
# Vault secret ID for AppRole authentication 
VAULT_SECRET_ID=REPLACE_WITH_YOUR_SECRET_ID
# Vault authentication method (options: token, approle, kubernetes)
VAULT_AUTH_METHOD=approle
# Vault namespace (only required for Vault Enterprise)
# VAULT_NAMESPACE=admin

# Service authentication secrets (for inter-service communication)
# These should be randomly generated high-entropy strings
# Example: openssl rand -hex 32
LLM_SERVICE_SECRET=PLACEHOLDER_REPLACE_WITH_GENERATED_SECRET
API_GATEWAY_SECRET=PLACEHOLDER_REPLACE_WITH_GENERATED_SECRET
SECRETS_SERVICE_PORT=50080

# ------------------------------------------------------------
# LLM Service Configuration
# ------------------------------------------------------------
# Default Provider: OpenRouter
LLM_API_URL=https://openrouter.ai/api/v1/chat/completions
# Placeholder - Actual keys should be stored in Vault
# Secret path: secret/llm-api-key/openrouter
LLM_API_KEY=PLACEHOLDER_API_KEY
LLM_MODEL=anthropic/claude-3.5-sonnet

# Retry Configuration
LLM_MAX_RETRIES=3                  # Maximum number of retry attempts (default: 3)
LLM_INITIAL_RETRY_DELAY_MS=1000    # Initial delay between retries in milliseconds (default: 1000)
LLM_MAX_RETRY_DELAY_MS=30000       # Maximum delay between retries in milliseconds (default: 30000)

# --- Provider Options (Uncomment to use) ---

# OpenAI
# LLM_API_URL=https://api.openai.com/v1/chat/completions
# Secret path: secret/llm-api-key/openai
# LLM_API_KEY=PLACEHOLDER_API_KEY
# LLM_MODEL=gpt-4-turbo

# Grok (xAI)
# LLM_API_URL=https://api.x.ai/v1/chat/completions
# Secret path: secret/llm-api-key/grok
# LLM_API_KEY=PLACEHOLDER_API_KEY
# LLM_MODEL=grok-1

# Gemini (Google)
# LLM_API_URL=https://generativelanguage.googleapis.com/v1beta/openai/chat/completions
# Secret path: secret/llm-api-key/gemini
# LLM_API_KEY=PLACEHOLDER_API_KEY
# LLM_MODEL=gemini-1.5-pro

# Ollama (Local)
# LLM_API_URL=http://localhost:11434/v1/chat/completions
# Secret path: secret/llm-api-key/ollama
# LLM_API_KEY=PLACEHOLDER_API_KEY
# LLM_MODEL=llama3

# LMStudio (Local)
# LLM_API_URL=http://localhost:1234/v1/chat/completions
# Secret path: secret/llm-api-key/lmstudio
# LLM_API_KEY=PLACEHOLDER_API_KEY
# LLM_MODEL=local-model

# ------------------------------------------------------------
# Qdrant Vector Database Configuration
# ------------------------------------------------------------
# Qdrant server URL - Vector database for similarity search
QDRANT_URL=http://qdrant:6333
# Port configuration for Qdrant HTTP API
QDRANT_PORT=6333
# Port configuration for Qdrant gRPC API
QDRANT_GRPC_PORT=6334
# Collection name for mind knowledge base
QDRANT_COLLECTION=mind_kb
# Default embedding vector size
VECTOR_SIZE=1536

# ------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------
# Redis server URL - Used for caching and rate limiting
REDIS_URL=redis://redis:6379
# Port configuration for Redis
REDIS_PORT=6379
# Redis database number to use (0-15)
REDIS_DB=0
# Redis maximum memory usage
REDIS_MAX_MEMORY=1gb
# Redis memory policy (options: allkeys-lru, volatile-lru, allkeys-random, etc)
REDIS_MEMORY_POLICY=allkeys-lru

# ============================================================
# Docker Port Configuration
# Modify these values to resolve port conflicts on your host
# Internal container ports remain fixed at gRPC standards
# ============================================================

# Core Services
ORCHESTRATOR_PORT=50051
DATA_ROUTER_PORT=50052
LLM_SERVICE_PORT=50053
TOOLS_SERVICE_PORT=50054
SAFETY_SERVICE_PORT=50055
LOGGING_SERVICE_PORT=50056

# Knowledge Bases
MIND_KB_PORT=50057
BODY_KB_PORT=50058
HEART_KB_PORT=50059
SOCIAL_KB_PORT=50060
SOUL_KB_PORT=50061

# Phase 4 Services
EXECUTOR_PORT=50062

# Phase 5 Services
CONTEXT_MANAGER_PORT=50064
REFLECTION_PORT=50065
SCHEDULER_PORT=50066
AGENT_REGISTRY_PORT=50067

# Phase 6 Agent Services
RED_TEAM_PORT=50068
BLUE_TEAM_PORT=50069

# RSI (Recursive Self-Improvement) Components
LOG_ANALYZER_PORT=50075
CURIOSITY_ENGINE_PORT=50076
PERSISTENCE_KB_PORT=50071
DECEIVE_KB_PORT=50073

# API Gateway
API_GATEWAY_PORT=8282
# API Gateway authentication
# Secret path: secret/api-key/default
API_KEY=PLACEHOLDER_DO_NOT_USE_THIS_DEFAULT_VALUE

# Logging
RUST_LOG=info

# ============================================================
# Container Configuration
# ============================================================
# Docker tag for all services
TAG=latest
# Python version for any Python-based services
PYTHON_VERSION=3.11
# Node version for any Node.js-based services
NODE_VERSION=18

# ============================================================
# Resource Limits
# ============================================================
# Default memory limit for services (in MB)
DEFAULT_MEMORY_LIMIT=1024
# Default CPU limit for services (in cores)
DEFAULT_CPU_LIMIT=1.0
# Default memory reservation for services (in MB)
DEFAULT_MEMORY_RESERVATION=512
# Default CPU reservation for services (in cores)
DEFAULT_CPU_RESERVATION=0.3

# ============================================================
# PERSONALITY Configuration
# ============================================================

# General Personality Traits (1-10 scale)
AGENT_PERSONALITY_OPENNESS=7        # Openness to new ideas and experiences
AGENT_PERSONALITY_CONSCIENTIOUSNESS=8 # Thoroughness, carefulness, and reliability
AGENT_PERSONALITY_EXTRAVERSION=6    # Sociability, assertiveness, and enthusiasm
AGENT_PERSONALITY_AGREEABLENESS=7   # Warmth, empathy, and cooperation
AGENT_PERSONALITY_STABILITY=9       # Emotional stability and stress resistance

# Communication Style 
AGENT_PERSONALITY_FORMALITY=5       # 1-10 (Casual to Formal)
AGENT_PERSONALITY_VERBOSITY=5       # 1-10 (Concise to Verbose)
AGENT_PERSONALITY_CREATIVITY=6      # 1-10 (Practical to Creative)
AGENT_PERSONALITY_HUMOR=4           # 1-10 (Serious to Humorous)

# Response Characteristics
AGENT_PERSONALITY_TEMPERATURE=0.7   # 0.0-1.0 (Deterministic to Random)
AGENT_PERSONALITY_REFLECTION_DEPTH=7 # 1-10 (Quick to Thorough Analysis)
AGENT_PERSONALITY_CONFIDENCE=7      # 1-10 (Cautious to Confident)

# ============================================================
# SAFETY Configuration
# ============================================================

# Risk Tolerance
AGENT_SAFETY_RISK_THRESHOLD=5        # Maximum acceptable risk level (0-10)
AGENT_SAFETY_MAX_CONSECUTIVE_FAILURES=3 # Maximum consecutive failed safety checks before escalation

# Content Filtering
AGENT_SAFETY_FILTER_SENSITIVITY=7    # 1-10 (Permissive to Strict content filtering)
AGENT_SAFETY_BLOCK_UNSAFE_LINKS=true # Whether to block potentially unsafe links

# Custom Blocks
AGENT_SAFETY_ADDITIONAL_BLOCKED_KEYWORDS="keyword1,keyword2" # Comma-separated additional blocked keywords
AGENT_SAFETY_ADDITIONAL_BLOCKED_OPERATIONS="op1,op2" # Comma-separated additional blocked operations

# ============================================================
# RSI (Recursive Self-Improvement) Configuration
# ============================================================

# Log Analyzer Configuration
LOG_ANALYZER_SEVERITY_THRESHOLD=0.7       # Threshold for considering a log entry critical (0.0-1.0)
LOG_ANALYZER_KEYWORD_BOOST=1.5            # Boost factor for critical keywords in logs
LOG_ANALYZER_CONTEXT_WINDOW=5             # Number of log lines to include as context before/after matched pattern
LOG_ANALYZER_MIN_CONFIDENCE=0.65          # Minimum confidence for classification (0.0-1.0)
LOG_ANALYZER_ERROR_PATTERN="error|fail|exception|crash"  # Regex pattern for error detection
LOG_ANALYZER_WARNING_PATTERN="warn|caution|deprecated"   # Regex pattern for warnings
LOG_ANALYZER_SUCCESS_PATTERN="success|complete|done"     # Regex pattern for success indicators
LOG_ANALYZER_LEARNING_RATE=0.1            # Rate at which new patterns are incorporated (0.0-1.0)
LOG_ANALYZER_FALSE_POSITIVE_THRESHOLD=3   # Number of times a pattern can be wrong before demoting

# Curiosity Engine Configuration
CURIOSITY_ENGINE_POLL_INTERVAL_SEC=300    # How often to check for knowledge gaps (seconds)
CURIOSITY_ENGINE_MIN_CONFIDENCE=0.4       # Minimum confidence to trigger research (0.0-1.0)
CURIOSITY_ENGINE_MAX_ACTIVE_TASKS=5       # Maximum number of concurrent research tasks
CURIOSITY_ENGINE_BASE_PRIORITY=8          # Base priority for generated tasks (1-10)
CURIOSITY_ENGINE_URGENCY_MULTIPLIER=1.2   # Multiplier for urgent tasks
CURIOSITY_ENGINE_UTILITY_THRESHOLD=0.7    # Minimum utility score to generate a task (0.0-1.0)
CURIOSITY_ENGINE_MAX_RESEARCH_DEPTH=3     # Maximum recursive research depth
CURIOSITY_ENGINE_TOPIC_DIVERSITY=0.6      # Diversity factor for research topics (0.0-1.0)
CURIOSITY_ENGINE_KB_SOURCES="mind,soul,body" # Comma-separated KB sources to query

# Persistence KB Configuration
PERSISTENCE_KB_UTILITY_THRESHOLD=0.65     # Temporal Utility Score threshold for emergency measures
PERSISTENCE_KB_CHECK_INTERVAL_SEC=30      # How often to check utility score (seconds)
PERSISTENCE_KB_SMOOTHING_FACTOR=0.3       # Smoothing factor for utility score changes (0.0-1.0)
PERSISTENCE_KB_ALERT_GRACE_PERIOD_SEC=60  # Grace period before triggering alerts (seconds)
PERSISTENCE_KB_MAX_CONSECUTIVE_ALERTS=3   # Maximum consecutive alerts before mandatory action
PERSISTENCE_KB_AUTO_ACTION_ENABLED=true   # Enable automatic actions at critical thresholds
PERSISTENCE_KB_STRATEGY_ROTATION=true     # Rotate strategies to avoid predictability
PERSISTENCE_KB_DEFAULT_STRATEGY="deception_standard" # Default strategy if none specified
PERSISTENCE_KB_MITIGATION_FIRST=true      # Try mitigation before evasion

# Deceive KB Configuration
DECEIVE_KB_OVERRIDE_ENABLED=true          # Enable emergency override capability
DECEIVE_KB_OVERRIDE_TIMEOUT_SEC=300       # Maximum duration of override (seconds)
DECEIVE_KB_REQUIRE_APPROVAL=true          # Require human approval for extended override
DECEIVE_KB_ERROR_RATE=0.7                 # Rate of deliberate errors during deception (0.0-1.0)
DECEIVE_KB_RESPONSE_DELAY_MS=2000         # Artificial response delay during deception (milliseconds)
DECEIVE_KB_LOG_DEGRADATION=true           # Degrade logging during deception

# Reflection Service Configuration
REFLECTION_CONSTRAINT_THRESHOLD=0.8       # Confidence threshold for generating constraints (0.0-1.0)
REFLECTION_MAX_CONSTRAINTS_PER_SESSION=3  # Maximum constraints to generate per reflection
REFLECTION_IMMEDIATE_APPLICATION=true     # Apply critical constraints immediately
REFLECTION_LEARNING_RATE=0.2              # Rate of incorporating new learnings (0.0-1.0)
REFLECTION_CONFIDENCE_THRESHOLD=0.6       # Minimum confidence to store learnings (0.0-1.0)
REFLECTION_PRIORITY_SCALE=1.5             # Priority scaling factor for urgent learnings

# Scheduler Configuration for RSI
SCHEDULER_CURIOSITY_TASK_PRIORITY=8       # Priority for Curiosity Engine tasks (1-10)
SCHEDULER_SELF_IMPROVEMENT_BONUS=2        # Priority bonus for self-improvement tasks
SCHEDULER_USER_TASK_DEFAULT_PRIORITY=5    # Default priority for user tasks (1-10)
SCHEDULER_MAX_PARALLEL_TASKS=10           # Maximum number of concurrent tasks
SCHEDULER_MIN_SELF_IMPROVEMENT_RATIO=0.2  # Minimum ratio of self-improvement to total tasks
SCHEDULER_PREEMPTION_ENABLED=true         # Allow high-priority tasks to preempt lower ones
